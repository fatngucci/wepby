{% extends 'home.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block css %}
    <link rel="stylesheet" type="text/css" href="{% static 'Snacks/snacks_style.css' %}">
{% endblock %}

{% block title %} Snack detail{% endblock %}

{% block content %}
    <div class="row bg-warning border">
        <div class="ml-auto p-4">
            <img class="" src="{{ that_one_snack.bilder.url }}" height="350" width="350" alt="">
        </div>
        <div class="mr-auto p-4">
            <table class="my-auto">
                <tr>
                    <td><b>Name:</b></td>
                    <td>{{ that_one_snack.name }}</td>
                </tr>
                <tr>
                    <td><b>Gewicht:</b></td>
                    <td>{{ that_one_snack.gewicht }} g</td>
                </tr>
                <tr>
                    <td><b>Beschreibung:</b></td>
                    <td>{{ that_one_snack.beschreibung }}</td>
                </tr>
                <tr>
                    <td><b>Artikelnummer:</b></td>
                    <td>{{ that_one_snack.artikelnummer }}</td>
                </tr>
                <tr>
                    <td><b>Preis:</b></td>
                    <td>{{ that_one_snack.preis }} â‚¬</td>
                </tr>
                <tr>
                    <td><b>Hersteller:</b></td>
                    <td>{{ that_one_snack.hersteller.username }}</td>
                </tr>
                <tr>
                    <td><b>Erstellungs-Zeitstempel:</b></td>
                    <td>{{ that_one_snack.erstellungs_zeitstempel }}</td>
                </tr>
                <tr>
                    <td><b>Produktinfo:</b></td>
                    <td><a href="{{ that_one_snack.produkt_info.url }}">{{ that_one_snack.produkt_info.name }}</a></td>
                </tr>
                <tr>
                    <td><b>Bewertung:</b></td>
                    <td>{{ that_one_snack.get_bewertung }}</td>
                </tr>

            </table>
        </div>
    </div>

    <div class="row my-4">
        <div class="mx-auto p-1">
            {% if user.is_authenticated %}
                <form method="POST">
                    {% csrf_token %}
                    <button type="submit" name="cart">Add to shopping cart</button>
                </form>
            {% else %}
                <br><a href="{% url 'login' %}">Login</a> to add to shopping cart
                <br>
            {%  endif %}
        </div>
    </div>
    <div class="row">
        <div class="ml-auto p-4">
            {% for comment in comments_for_that_one_snack %}
                <b>{{ comment.poster.username }} on {{ comment.timestamp }}</b><br>
                {% for star in comment.get_sterne %}
                    {% if star %}
                        <img src="{% static 'Snacks/staryellow.png' %}" height="25", width="25">
                    {% else %}
                        <img src="{% static 'Snacks/stargrey.png' %}" height="25", width="25">
                    {% endif %}
                {% endfor %}<br>
                {{ comment.text }}<br>

                <span>{{ comment.get_upvotes_count }}</span>
                <a href="{% url 'comment-vote' comment.id 'up' %}">
                    <img src="{% static 'Snacks/upvote.png' %}" height="30" width ="30">
                </a>

                <span>{{ comment.get_downvotes_count }}</span>
                <a href="{% url 'comment-vote' comment.id 'down' %}">
                    <img src="{% static 'Snacks/downvote.png' %}" height="30" width ="30">
                </a>
                <br>
                {% if comment.poster == user %}
                    <a href="{% url 'comment-edit' comment.id %}">Edit</a>
                    <a href="{% url 'comment-delete' comment.id %}">Delete</a>
                {% else %}
                    <a>Report</a>
                {% endif %}
                <br>

            {% endfor %}
        </div>
        <div class="mr-auto p-4">
            <b style="color: white">Share your thoughts on this snack</b><br>
            <form method="POST">
                {% csrf_token %}
                {{ comment_form.as_p }}
                <button type="submit" name="comment">Post comment</button>
            </form>

        </div>
    </div>
    <a href="{% url 'snack-list' %}">Back to all snacks</a>
    <a href="{{ snack.id }}delete/">Delete snack</a>
{% endblock %}